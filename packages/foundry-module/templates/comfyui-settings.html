<form class="eci-settings">
  <section class="eci-block">
    <h2 class="eci-title">Map Generation Service</h2>
    <p class="eci-note">
      Configure your map generation service for AI-powered battlemap creation. Currently supports
      ComfyUI installations with plans for future cloud services.
    </p>
  </section>

  <hr class="eci-divider"/>

  <section class="eci-block">
    <h3 class="eci-subtitle">Service Type</h3>
    <div class="eci-form-group">
      <label for="serviceType" class="eci-label">Service Type:</label>
      <select name="serviceType" id="serviceType" class="eci-select">
        <option value="local" {{#if (eq serviceType "local")}}selected{{/if}}>Local Service (ComfyUI)</option>
        <option value="remote" {{#if (eq serviceType "remote")}}selected{{/if}}>Remote Service</option>
      </select>
      <p class="eci-hint">Local: ComfyUI running on your machine. Remote: ComfyUI on another server.</p>
    </div>

    <div class="eci-form-group" data-service-type="remote">
      <label for="comfyuiHost" class="eci-label">Service Host:</label>
      <input type="text" name="comfyuiHost" id="comfyuiHost" value="{{comfyuiHost}}" placeholder="127.0.0.1" class="eci-input">
      <p class="eci-hint">IP address or hostname where the map generation service is running.</p>
    </div>

    <div class="eci-form-group" data-service-type="local remote">
      <label for="comfyuiPort" class="eci-label">Service Port:</label>
      <input type="number" name="comfyuiPort" id="comfyuiPort" value="{{comfyuiPort}}" placeholder="31411" min="1" max="65535" class="eci-input">
      <p class="eci-hint">Port number for the map generation service API (default: 31411 for ComfyUI).</p>
    </div>
  </section>

  <hr class="eci-divider"/>

  <section class="eci-block">
    <h3 class="eci-subtitle">Service Status</h3>
    <div class="eci-status-container">
      <div class="eci-status {{connectionStatus}}" id="connection-status">
        <span id="status-text">{{connectionStatusText}}</span>
      </div>
      <div class="eci-controls">
        <button type="button" class="eci-btn check" id="check-status-btn">
          <i class="fas fa-sync"></i> Check Status
        </button>
        <button type="button" class="eci-btn start" id="start-service-btn" data-service-type="local">
          <i class="fas fa-play"></i> Start Service
        </button>
        <button type="button" class="eci-btn stop" id="stop-service-btn" data-service-type="local">
          <i class="fas fa-stop"></i> Stop Service
        </button>
      </div>
    </div>
  </section>

  <hr class="eci-divider"/>

  <section class="eci-block eci-settings-block">
    <h3 class="eci-subtitle">Service Settings</h3>

    <label class="eci-check">
      <input type="checkbox" name="autoStartService" {{#if autoStartService}}checked{{/if}} />
      <span>
        <strong>Auto-start Map Generation Service</strong> â€” Automatically start the service when Foundry loads (local services only).
      </span>
    </label>
  </section>

  <hr class="eci-divider"/>

  <div class="form-footer">
    <button type="submit" class="eci-btn"><i class="fas fa-save"></i> Apply Settings</button>
  </div>
</form>